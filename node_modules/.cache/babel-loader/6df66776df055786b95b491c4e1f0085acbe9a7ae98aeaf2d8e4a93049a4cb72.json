{"ast":null,"code":"var _jsxFileName = \"/home/user/Documents/a11/homely/src/pages/Order.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { firestore, auth } from \"../firebase/firebaseConfig\";\nimport { collection, addDoc, Timestamp } from \"firebase/firestore\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport \"./order.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Order = () => {\n  _s();\n  var _location$state;\n  const location = useLocation();\n  const navigate = useNavigate();\n  const dish = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.dish) || null;\n  useEffect(() => {\n    if (!dish) {\n      console.error(\"No dish found, redirecting to homepage.\");\n      navigate(\"/home\");\n    }\n  }, [dish, navigate]);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [deliveryAddress, setDeliveryAddress] = useState(\"\");\n  useEffect(() => {\n    if (dish) {\n      setTotalPrice(dish.price);\n    }\n  }, [dish]);\n  const handlePlaceOrder = async () => {\n    const user = auth.currentUser;\n    if (!user) {\n      alert(\"You must be logged in to place an order!\");\n      return;\n    }\n    if (!deliveryAddress) {\n      alert(\"Please enter a delivery address.\");\n      return;\n    }\n    try {\n      await addDoc(collection(firestore, \"orders\"), {\n        customerId: user.uid,\n        dishId: dish.id,\n        dishName: dish.name,\n        total: totalPrice,\n        status: \"pending\",\n        orderDate: Timestamp.fromDate(new Date()),\n        paymentStatus: \"pending\",\n        deliveryAddress\n      });\n      alert(\"Order placed successfully!\");\n      navigate(\"/home\"); // Redirect to home after order\n    } catch (error) {\n      console.error(\"Error placing order:\", error);\n      alert(\"Error placing order. Please try again.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"order-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Order Summary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), dish ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [dish.name, \" - $\", dish.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Total: $\", totalPrice]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter delivery address\",\n        value: deliveryAddress,\n        onChange: e => setDeliveryAddress(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlePlaceOrder,\n        className: \"place-order-btn\",\n        children: \"Place Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Redirecting...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(Order, \"oTiNJioz5yA7WQ3PBet0g0JqLaM=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = Order;\nexport default Order;\nvar _c;\n$RefreshReg$(_c, \"Order\");","map":{"version":3,"names":["React","useState","useEffect","firestore","auth","collection","addDoc","Timestamp","useLocation","useNavigate","jsxDEV","_jsxDEV","Order","_s","_location$state","location","navigate","dish","state","console","error","totalPrice","setTotalPrice","deliveryAddress","setDeliveryAddress","price","handlePlaceOrder","user","currentUser","alert","customerId","uid","dishId","id","dishName","name","total","status","orderDate","fromDate","Date","paymentStatus","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","_c","$RefreshReg$"],"sources":["/home/user/Documents/a11/homely/src/pages/Order.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { firestore, auth } from \"../firebase/firebaseConfig\";\nimport { collection, addDoc, Timestamp } from \"firebase/firestore\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport \"./order.css\";\n\nconst Order = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const dish = location.state?.dish || null;\n\n  useEffect(() => {\n    if (!dish) {\n      console.error(\"No dish found, redirecting to homepage.\");\n      navigate(\"/home\");\n    }\n  }, [dish, navigate]);\n\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [deliveryAddress, setDeliveryAddress] = useState(\"\");\n\n  useEffect(() => {\n    if (dish) {\n      setTotalPrice(dish.price);\n    }\n  }, [dish]);\n\n  const handlePlaceOrder = async () => {\n    const user = auth.currentUser;\n    if (!user) {\n      alert(\"You must be logged in to place an order!\");\n      return;\n    }\n\n    if (!deliveryAddress) {\n      alert(\"Please enter a delivery address.\");\n      return;\n    }\n\n    try {\n      await addDoc(collection(firestore, \"orders\"), {\n        customerId: user.uid,\n        dishId: dish.id,\n        dishName: dish.name,\n        total: totalPrice,\n        status: \"pending\",\n        orderDate: Timestamp.fromDate(new Date()),\n        paymentStatus: \"pending\",\n        deliveryAddress,\n      });\n\n      alert(\"Order placed successfully!\");\n      navigate(\"/home\"); // Redirect to home after order\n    } catch (error) {\n      console.error(\"Error placing order:\", error);\n      alert(\"Error placing order. Please try again.\");\n    }\n  };\n\n  return (\n    <div className=\"order-container\">\n      <h3>Order Summary</h3>\n      {dish ? (\n        <div className=\"order-details\">\n          <p>{dish.name} - ${dish.price}</p>\n          <h4>Total: ${totalPrice}</h4>\n          <input\n            type=\"text\"\n            placeholder=\"Enter delivery address\"\n            value={deliveryAddress}\n            onChange={(e) => setDeliveryAddress(e.target.value)}\n          />\n          <button onClick={handlePlaceOrder} className=\"place-order-btn\">\n            Place Order\n          </button>\n        </div>\n      ) : (\n        <p>Redirecting...</p>\n      )}\n    </div>\n  );\n};\n\nexport default Order;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,IAAI,QAAQ,4BAA4B;AAC5D,SAASC,UAAU,EAAEC,MAAM,EAAEC,SAAS,QAAQ,oBAAoB;AAClE,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,OAAO,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErB,MAAMC,KAAK,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,eAAA;EAClB,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAMQ,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAMQ,IAAI,GAAG,EAAAH,eAAA,GAAAC,QAAQ,CAACG,KAAK,cAAAJ,eAAA,uBAAdA,eAAA,CAAgBG,IAAI,KAAI,IAAI;EAEzCf,SAAS,CAAC,MAAM;IACd,IAAI,CAACe,IAAI,EAAE;MACTE,OAAO,CAACC,KAAK,CAAC,yCAAyC,CAAC;MACxDJ,QAAQ,CAAC,OAAO,CAAC;IACnB;EACF,CAAC,EAAE,CAACC,IAAI,EAAED,QAAQ,CAAC,CAAC;EAEpB,MAAM,CAACK,UAAU,EAAEC,aAAa,CAAC,GAAGrB,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACsB,eAAe,EAAEC,kBAAkB,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAE1DC,SAAS,CAAC,MAAM;IACd,IAAIe,IAAI,EAAE;MACRK,aAAa,CAACL,IAAI,CAACQ,KAAK,CAAC;IAC3B;EACF,CAAC,EAAE,CAACR,IAAI,CAAC,CAAC;EAEV,MAAMS,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,MAAMC,IAAI,GAAGvB,IAAI,CAACwB,WAAW;IAC7B,IAAI,CAACD,IAAI,EAAE;MACTE,KAAK,CAAC,0CAA0C,CAAC;MACjD;IACF;IAEA,IAAI,CAACN,eAAe,EAAE;MACpBM,KAAK,CAAC,kCAAkC,CAAC;MACzC;IACF;IAEA,IAAI;MACF,MAAMvB,MAAM,CAACD,UAAU,CAACF,SAAS,EAAE,QAAQ,CAAC,EAAE;QAC5C2B,UAAU,EAAEH,IAAI,CAACI,GAAG;QACpBC,MAAM,EAAEf,IAAI,CAACgB,EAAE;QACfC,QAAQ,EAAEjB,IAAI,CAACkB,IAAI;QACnBC,KAAK,EAAEf,UAAU;QACjBgB,MAAM,EAAE,SAAS;QACjBC,SAAS,EAAE/B,SAAS,CAACgC,QAAQ,CAAC,IAAIC,IAAI,CAAC,CAAC,CAAC;QACzCC,aAAa,EAAE,SAAS;QACxBlB;MACF,CAAC,CAAC;MAEFM,KAAK,CAAC,4BAA4B,CAAC;MACnCb,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;IACrB,CAAC,CAAC,OAAOI,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5CS,KAAK,CAAC,wCAAwC,CAAC;IACjD;EACF,CAAC;EAED,oBACElB,OAAA;IAAK+B,SAAS,EAAC,iBAAiB;IAAAC,QAAA,gBAC9BhC,OAAA;MAAAgC,QAAA,EAAI;IAAa;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EACrB9B,IAAI,gBACHN,OAAA;MAAK+B,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAC5BhC,OAAA;QAAAgC,QAAA,GAAI1B,IAAI,CAACkB,IAAI,EAAC,MAAI,EAAClB,IAAI,CAACQ,KAAK;MAAA;QAAAmB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAClCpC,OAAA;QAAAgC,QAAA,GAAI,UAAQ,EAACtB,UAAU;MAAA;QAAAuB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAC7BpC,OAAA;QACEqC,IAAI,EAAC,MAAM;QACXC,WAAW,EAAC,wBAAwB;QACpCC,KAAK,EAAE3B,eAAgB;QACvB4B,QAAQ,EAAGC,CAAC,IAAK5B,kBAAkB,CAAC4B,CAAC,CAACC,MAAM,CAACH,KAAK;MAAE;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrD,CAAC,eACFpC,OAAA;QAAQ2C,OAAO,EAAE5B,gBAAiB;QAACgB,SAAS,EAAC,iBAAiB;QAAAC,QAAA,EAAC;MAE/D;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,gBAENpC,OAAA;MAAAgC,QAAA,EAAG;IAAc;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CACrB;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAClC,EAAA,CA3EID,KAAK;EAAA,QACQJ,WAAW,EACXC,WAAW;AAAA;AAAA8C,EAAA,GAFxB3C,KAAK;AA6EX,eAAeA,KAAK;AAAC,IAAA2C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}