{"ast":null,"code":"var _jsxFileName = \"/home/user/Documents/a11/homely/src/pages/CustomerProfile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { auth, firestore } from '../firebase/firebaseConfig';\nimport { useNavigate } from 'react-router-dom';\nimport { doc, getDoc, collection, query, where, getDocs } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CustomerProfile = () => {\n  _s();\n  const [customerData, setCustomerData] = useState(null);\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n  const user = auth.currentUser;\n  useEffect(() => {\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n    const fetchCustomerData = async () => {\n      try {\n        const userDocRef = doc(firestore, 'users', user.uid);\n        const userDoc = await getDoc(userDocRef);\n        if (userDoc.exists()) {\n          const userData = userDoc.data();\n          if (userData.role === 'customer') {\n            setCustomerData(userData);\n            fetchOrders(user.uid);\n          } else {\n            navigate('/login');\n          }\n        } else {\n          navigate('/login');\n        }\n      } catch (error) {\n        console.error('Error fetching customer data:', error);\n        navigate('/login');\n      }\n    };\n    const fetchOrders = async customerId => {\n      try {\n        const ordersQuery = query(collection(firestore, 'orders'), where('customerId', '==', customerId));\n        const ordersSnapshot = await getDocs(ordersQuery);\n        const ordersList = ordersSnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setOrders(ordersList);\n      } catch (error) {\n        console.error('Error fetching orders:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchCustomerData();\n  }, [user, navigate]);\n  const handleOrderClick = order => {\n    navigate('/order-details', {\n      state: {\n        order\n      }\n    }); // ✅ Navigate to OrderDetails.js with order data\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Customer Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 10\n      }, this), \" \", customerData.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Email:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 10\n      }, this), \" \", customerData.email]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Your Orders\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), orders.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"order-list\",\n      children: orders.map(order => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"order-item\",\n        onClick: () => handleOrderClick(order),\n        style: {\n          cursor: 'pointer'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Order ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 18\n          }, this), \" \", order.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Total Price:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 18\n          }, this), \" $\", order.total]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Status:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 18\n          }, this), \" \", order.status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 15\n        }, this)]\n      }, order.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No orders placed yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(CustomerProfile, \"tygsxR8scrPZ+twIw5n3OjpjdnQ=\", false, function () {\n  return [useNavigate];\n});\n_c = CustomerProfile;\nexport default CustomerProfile;\nvar _c;\n$RefreshReg$(_c, \"CustomerProfile\");","map":{"version":3,"names":["React","useState","useEffect","auth","firestore","useNavigate","doc","getDoc","collection","query","where","getDocs","jsxDEV","_jsxDEV","CustomerProfile","_s","customerData","setCustomerData","orders","setOrders","loading","setLoading","navigate","user","currentUser","fetchCustomerData","userDocRef","uid","userDoc","exists","userData","data","role","fetchOrders","error","console","customerId","ordersQuery","ordersSnapshot","ordersList","docs","map","id","handleOrderClick","order","state","children","fileName","_jsxFileName","lineNumber","columnNumber","className","name","email","length","onClick","style","cursor","total","status","_c","$RefreshReg$"],"sources":["/home/user/Documents/a11/homely/src/pages/CustomerProfile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { auth, firestore } from '../firebase/firebaseConfig';\nimport { useNavigate } from 'react-router-dom';\nimport { doc, getDoc, collection, query, where, getDocs } from 'firebase/firestore';\n\nconst CustomerProfile = () => {\n  const [customerData, setCustomerData] = useState(null);\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n  const user = auth.currentUser;\n\n  useEffect(() => {\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n\n    const fetchCustomerData = async () => {\n      try {\n        const userDocRef = doc(firestore, 'users', user.uid);\n        const userDoc = await getDoc(userDocRef);\n\n        if (userDoc.exists()) {\n          const userData = userDoc.data();\n          if (userData.role === 'customer') {\n            setCustomerData(userData);\n            fetchOrders(user.uid);\n          } else {\n            navigate('/login');\n          }\n        } else {\n          navigate('/login');\n        }\n      } catch (error) {\n        console.error('Error fetching customer data:', error);\n        navigate('/login');\n      }\n    };\n\n    const fetchOrders = async (customerId) => {\n      try {\n        const ordersQuery = query(collection(firestore, 'orders'), where('customerId', '==', customerId));\n        const ordersSnapshot = await getDocs(ordersQuery);\n        const ordersList = ordersSnapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\n        setOrders(ordersList);\n      } catch (error) {\n        console.error('Error fetching orders:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCustomerData();\n  }, [user, navigate]);\n\n  const handleOrderClick = (order) => {\n    navigate('/order-details', { state: { order } }); // ✅ Navigate to OrderDetails.js with order data\n  };\n\n  if (loading) return <div>Loading...</div>;\n\n  return (\n    <div className=\"profile\">\n      <h2>Customer Profile</h2>\n      <p><strong>Name:</strong> {customerData.name}</p>\n      <p><strong>Email:</strong> {customerData.email}</p>\n\n      <h3>Your Orders</h3>\n      {orders.length > 0 ? (\n        <ul className=\"order-list\">\n          {orders.map((order) => (\n            <li key={order.id} className=\"order-item\" onClick={() => handleOrderClick(order)} style={{ cursor: 'pointer' }}>\n              <p><strong>Order ID:</strong> {order.id}</p>\n              <p><strong>Total Price:</strong> ${order.total}</p>\n              <p><strong>Status:</strong> {order.status}</p>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <p>No orders placed yet.</p>\n      )}\n    </div>\n  );\n};\n\nexport default CustomerProfile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}