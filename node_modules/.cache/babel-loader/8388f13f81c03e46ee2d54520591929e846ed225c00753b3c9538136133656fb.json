{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{auth}from\"../firebase/firebaseConfig\";import{firestore}from\"../firebase/firebaseConfig\";// Ensure correct import\nimport{getDoc,doc}from\"firebase/firestore\";import'./Navbar.css';import logo from\"../images/logo1.png\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Navbar=()=>{const[role,setRole]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchUserRole=async()=>{const user=auth.currentUser;if(user){try{const userDoc=await getDoc(doc(firestore,\"users\",user.uid));if(userDoc.exists()){setRole(userDoc.data().role);// Fetch role from Firestore\n}}catch(error){console.error(\"Error fetching user role:\",error);}}};fetchUserRole();},[]);const handleLogout=async()=>{try{await auth.signOut();alert(\"You have been logged out.\");navigate(\"/\");// Redirect to signup page after logout\n}catch(error){console.error(\"Error logging out:\",error.message);alert(\"Logout failed. Please try again.\");}};return/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar-list\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"left\",children:[/*#__PURE__*/_jsx(Link,{to:\"/home\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Homely Logo\",className:\"logo\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/home\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/about\",children:\"About\"})}),/*#__PURE__*/_jsx(\"li\",{children:role===\"cook\"?/*#__PURE__*/_jsx(Link,{to:\"/cookprofile\",children:\"Profile\"}):/*#__PURE__*/_jsx(Link,{to:\"/customerprofile\",children:\"Profile\"})})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"right\",children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-btn\",children:\"Logout\"})})})]});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","auth","firestore","getDoc","doc","logo","jsx","_jsx","jsxs","_jsxs","Navbar","role","setRole","navigate","fetchUserRole","user","currentUser","userDoc","uid","exists","data","error","console","handleLogout","signOut","alert","message","className","children","to","src","alt","onClick"],"sources":["/home/user/Documents/a11/Homely/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { auth } from \"../firebase/firebaseConfig\";\nimport { firestore } from \"../firebase/firebaseConfig\"; // Ensure correct import\nimport { getDoc, doc } from \"firebase/firestore\";\nimport './Navbar.css';\nimport logo from \"../images/logo1.png\";\n\nconst Navbar = () => {\n  const [role, setRole] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchUserRole = async () => {\n      const user = auth.currentUser;\n      if (user) {\n        try {\n          const userDoc = await getDoc(doc(firestore, \"users\", user.uid));\n          if (userDoc.exists()) {\n            setRole(userDoc.data().role); // Fetch role from Firestore\n          }\n        } catch (error) {\n          console.error(\"Error fetching user role:\", error);\n        }\n      }\n    };\n\n    fetchUserRole();\n  }, []);\n\n  const handleLogout = async () => {\n    try {\n      await auth.signOut();\n      alert(\"You have been logged out.\");\n      navigate(\"/\"); // Redirect to signup page after logout\n    } catch (error) {\n      console.error(\"Error logging out:\", error.message);\n      alert(\"Logout failed. Please try again.\");\n    }\n  };\n\n  return (\n    <nav className=\"navbar-list\">\n      <ul className=\"left\">\n      <Link to=\"/home\">\n            <img src={logo} alt=\"Homely Logo\" className=\"logo\" />\n          </Link>\n        <li><Link to=\"/home\">Home</Link></li>\n        <li><Link to=\"/about\">About</Link></li>\n        <li>\n          {role === \"cook\" ? (\n            <Link to=\"/cookprofile\">Profile</Link>\n          ) : (\n            <Link to=\"/customerprofile\">Profile</Link>\n          )}\n        </li>\n        </ul>\n        <ul className=\"right\">\n        <li>\n          <button onClick={handleLogout} className=\"logout-btn\">\n            Logout\n          </button>\n        </li>\n      </ul>\n    </nav>\n  );\n};\n\nexport default Navbar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}